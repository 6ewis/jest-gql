!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react-apollo")):"function"==typeof define&&define.amd?define("@binpar/jest-gql",["react-apollo"],t):"object"==typeof exports?exports["@binpar/jest-gql"]=t(require("react-apollo")):e["@binpar/jest-gql"]=t(e["react-apollo"])}("undefined"!=typeof self?self:this,function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(2),i=(r=o)&&r.__esModule?r:{default:r};function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,i){try{var u=t[o](i),a=u.value}catch(e){return void n(e)}if(!u.done)return Promise.resolve(a).then(function(e){r("next",e)},function(e){r("throw",e)});e(a)}("next")})}}const{describe:a,test:s,expect:l}=e,c=(f=u(function*(e){a("GraphQL Tests",u(function*(){let t={};const n=(r=u(function*(e){const r=(0,i.default)(t),o=e.pop();if(1!==o.gql.definitions.length)throw Error("Only one GQL operation is allowed in a runGQLTest.");const u=o.gql.definitions[0];let a=null;switch(u.operation){case"mutation":{const e={mutation:o.gql};o.vars&&(e.variables=yield o.vars(t)),a=yield r.mutate(e),o.result&&(t=Object.assign({},t,yield o.result(a.data))),l(o.test(t)).toBe(!0);break}case"query":{const e={query:o.gql};o.vars&&(e.variables=yield o.vars(t)),a=yield r.query(e),o.result&&(t=Object.assign({},t,yield o.result(a.data))),l(o.test(t)).toBe(!0);break}default:throw Error(`Unknown GQL operation ${u.operation}.`)}e.length&&(yield n(e))}),function(e){return r.apply(this,arguments)});var r;const o=function(e,t){if(t.push(e),e.previous){const n=[...e.previous];for(;n.length;)o(n.pop(),t)}},a=(c=u(function*(e,t){const r=[];o(e,r),s(`${e.name}${void 0!==t?` ${t}`:""}`,u(function*(){l.assertions(r.length),yield n(r)}))}),function(e,t){return c.apply(this,arguments)});var c;return t.endPoint=e.endPoint,e.repeat?yield Promise.all(new Array(e.repeat).fill(0).map(function(t,n){return a(e,n+1)})):yield a(e),t}))}),function(e){return f.apply(this,arguments)});var f;t.default=c}).call(t,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3);t.default=function(e){const t=(0,r.createNetworkInterface)({uri:e.endPoint}),n=[{applyMiddleware(t,n){const r=e.oAuthToken;r&&(t.options.headers={},t.options.headers.authorization=`Bearer ${r}`),n()}}];t.use(n);const o=(0,r.createNetworkInterface)({uri:e.endPoint});return o.use(n),new r.ApolloClient({ssrMode:!0,networkInterface:o})}},function(t,n){t.exports=e}])});