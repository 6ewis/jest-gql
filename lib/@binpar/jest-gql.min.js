!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react-apollo")):"function"==typeof define&&define.amd?define("@binpar/jest-gql",["react-apollo"],t):"object"==typeof exports?exports["@binpar/jest-gql"]=t(require("react-apollo")):e["@binpar/jest-gql"]=t(e["react-apollo"])}("undefined"!=typeof self?self:this,function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(2),i=(r=o)&&r.__esModule?r:{default:r};function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t,n,r,o,i,u){try{var a=e[i](u),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function u(e){a(i,r,o,u,c,"next",e)}function c(e){a(i,r,o,u,c,"throw",e)}u(void 0)})}}const{describe:l,test:s,expect:f}=e,p=(d=c(function*(e){let t={endPoint:e.endPoint};return l("GraphQL Tests",function(){const n=(r=c(function*(e){const r=(0,i.default)(t),o=e.pop();if(1!==o.gql.definitions.length)throw Error("Only one GQL operation is allowed in a runGQLTest.");const a=o.gql.definitions[0];let l=null;if(!a.operation)throw Error(`Unknown GQL operation ${a.operation}.`);const s=(p=c(function*(e){const n={[`${e}`]:o.gql};o.vars&&(n.variables=yield o.vars(t)),l=yield r[{mutation:"mutate",query:"query"}[e]](n),o.result&&(t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){u(e,t,n[t])})}return e}({},t,yield o.result(l.data))),f(o.test(t)).toBe(!0)}),function(e){return p.apply(this,arguments)});var p;const{operation:d}=a;switch(d){case"mutation":case"query":yield s(d);break;default:throw Error(`Unknown GQL operation ${a.operation}.`)}e.length&&(yield n(e))}),function(e){return r.apply(this,arguments)});var r;const o=function(e,t){if(t.push(e),e.previous){const n=[...e.previous];for(;n.length;)o(n.pop(),t)}},a=(l=c(function*(e,t){const r=[];o(e,r),s(`${e.name}${void 0!==t?` ${t}`:""}`,c(function*(){f.assertions(r.length),yield n(r)}))}),function(e,t){return l.apply(this,arguments)});var l;var p;(p=c(function*(){e.repeat?yield Promise.all(new Array(e.repeat).fill(0).map(function(t,n){return a(e,n+1)})):yield a(e)}),function(){return p.apply(this,arguments)})()}),t}),function(e){return d.apply(this,arguments)});var d;t.default=p}).call(t,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3);t.default=function(e){const t=(0,r.createNetworkInterface)({uri:e.endPoint}),n=[{applyMiddleware(t,n){const r=e.oAuthToken;r&&(t.options.headers={},t.options.headers.authorization=`Bearer ${r}`),n()}}];t.use(n);const o=(0,r.createNetworkInterface)({uri:e.endPoint});return o.use(n),new r.ApolloClient({ssrMode:!0,networkInterface:o})}},function(t,n){t.exports=e}])});